---
import DocsLayout from '../../layouts/DocsLayout.astro';
import { getCollection } from 'astro:content';

const allDocs = await getCollection('docs');

// Organize docs by section
const sections = {
  'getting-started': {
    title: 'Getting Started',
    icon: 'üöÄ',
    description: 'Install RAPS and configure your credentials',
    docs: allDocs.filter(d => d.data.section === 'getting-started').sort((a, b) => a.data.order - b.data.order),
  },
  'commands': {
    title: 'Commands',
    icon: '‚å®Ô∏è',
    description: 'Complete command reference for all RAPS features',
    docs: allDocs.filter(d => d.data.section === 'commands').sort((a, b) => a.data.order - b.data.order),
  },
  'guides': {
    title: 'Guides',
    icon: 'üìñ',
    description: 'Tutorials and workflow examples',
    docs: allDocs.filter(d => d.data.section === 'guides').sort((a, b) => a.data.order - b.data.order),
  },
  'reference': {
    title: 'Reference',
    icon: 'üìö',
    description: 'Technical reference and specifications',
    docs: allDocs.filter(d => d.data.section === 'reference').sort((a, b) => a.data.order - b.data.order),
  },
};
---

<DocsLayout title="Documentation" currentSlug="">
  <div class="docs-content">
    <h1>RAPS Documentation</h1>
    <p class="text-xl text-slate-400 mb-8">
      Everything you need to know about using RAPS CLI for Autodesk Platform Services.
    </p>
    
    <!-- Quick links -->
    <div class="grid sm:grid-cols-2 gap-4 mb-12">
      <a href="/docs/introduction" class="group p-6 bg-gradient-to-br from-rapeseed-500/10 to-slate-900 border border-rapeseed-500/30 rounded-xl hover:border-rapeseed-500/60 transition-colors">
        <div class="flex items-center gap-3 mb-2">
          <span class="text-2xl">üìñ</span>
          <h3 class="text-lg font-semibold text-white group-hover:text-rapeseed-400 transition-colors">Introduction</h3>
        </div>
        <p class="text-slate-400 text-sm">Learn what RAPS is and what it can do</p>
      </a>
      
      <a href="/docs/installation" class="group p-6 bg-gradient-to-br from-emerald-500/10 to-slate-900 border border-emerald-500/30 rounded-xl hover:border-emerald-500/60 transition-colors">
        <div class="flex items-center gap-3 mb-2">
          <span class="text-2xl">üì•</span>
          <h3 class="text-lg font-semibold text-white group-hover:text-emerald-400 transition-colors">Installation</h3>
        </div>
        <p class="text-slate-400 text-sm">Get RAPS installed on your system</p>
      </a>
      
      <a href="/docs/configuration" class="group p-6 bg-gradient-to-br from-blue-500/10 to-slate-900 border border-blue-500/30 rounded-xl hover:border-blue-500/60 transition-colors">
        <div class="flex items-center gap-3 mb-2">
          <span class="text-2xl">‚öôÔ∏è</span>
          <h3 class="text-lg font-semibold text-white group-hover:text-blue-400 transition-colors">Configuration</h3>
        </div>
        <p class="text-slate-400 text-sm">Set up your APS credentials</p>
      </a>
      
      <a href="/docs/mcp-server" class="group p-6 bg-gradient-to-br from-purple-500/10 to-slate-900 border border-purple-500/30 rounded-xl hover:border-purple-500/60 transition-colors">
        <div class="flex items-center gap-3 mb-2">
          <span class="text-2xl">ü§ñ</span>
          <h3 class="text-lg font-semibold text-white group-hover:text-purple-400 transition-colors">MCP Server</h3>
        </div>
        <p class="text-slate-400 text-sm">AI assistant integration (v3.0.0+)</p>
      </a>
    </div>
    
    <!-- All sections -->
    {Object.entries(sections).map(([key, section]) => (
      section.docs.length > 0 && (
        <div class="mb-10">
          <div class="flex items-center gap-3 mb-4">
            <span class="text-2xl">{section.icon}</span>
            <div>
              <h2 class="text-xl font-bold text-white m-0 p-0 border-0">{section.title}</h2>
              <p class="text-slate-400 text-sm m-0">{section.description}</p>
            </div>
          </div>
          
          <div class="grid gap-2">
            {section.docs.map(doc => (
              <a 
                href={`/docs/${doc.slug}`}
                class="flex items-center gap-3 p-4 bg-slate-900/50 border border-slate-800 rounded-lg hover:border-slate-700 hover:bg-slate-800/50 transition-colors group"
              >
                {doc.data.icon && <span class="text-lg">{doc.data.icon}</span>}
                <div>
                  <h3 class="text-white font-medium group-hover:text-rapeseed-400 transition-colors">{doc.data.title}</h3>
                  {doc.data.description && (
                    <p class="text-slate-500 text-sm m-0">{doc.data.description}</p>
                  )}
                </div>
                <svg class="w-5 h-5 ml-auto text-slate-600 group-hover:text-slate-400 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
              </a>
            ))}
          </div>
        </div>
      )
    ))}
  </div>
</DocsLayout>

