---
title: "BIM 360/ACC Sync"
description: "Sync models between ACC and local storage"
section: "cookbook"
order: 16
icon: "☁️"
---

# BIM 360/ACC Sync

Download models from BIM 360/ACC and process locally.

## Workflow Overview

<div class="not-prose my-8">
  <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
    <div class="rounded-lg border-2 border-blue-500/50 bg-blue-950/30 p-4">
      <div class="text-xs font-semibold text-blue-400 uppercase tracking-wide mb-3">BIM 360 / ACC Cloud</div>
      <div class="space-y-2">
        <div class="flex items-center gap-2">
          <div class="w-2 h-2 rounded-full bg-blue-400"></div>
          <span class="text-sm text-slate-300">Hub</span>
        </div>
        <div class="ml-4 border-l border-blue-500/30 pl-3 space-y-2">
          <div class="flex items-center gap-2">
            <div class="w-2 h-2 rounded-full bg-blue-400"></div>
            <span class="text-sm text-slate-300">Project</span>
          </div>
          <div class="ml-4 border-l border-blue-500/30 pl-3 space-y-2">
            <div class="flex items-center gap-2">
              <div class="w-2 h-2 rounded-full bg-blue-400"></div>
              <span class="text-sm text-slate-300">Folder</span>
            </div>
            <div class="ml-4 border-l border-blue-500/30 pl-3 space-y-2">
              <div class="flex items-center gap-2">
                <div class="w-2 h-2 rounded-full bg-blue-400"></div>
                <span class="text-sm text-slate-300">Item</span>
              </div>
              <div class="ml-4 border-l border-blue-500/30 pl-3">
                <div class="flex items-center gap-2">
                  <div class="w-2 h-2 rounded-full bg-blue-400"></div>
                  <span class="text-sm text-slate-300">Version</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="rounded-lg border-2 border-amber-500/50 bg-amber-950/30 p-4">
      <div class="text-xs font-semibold text-amber-400 uppercase tracking-wide mb-3">Authentication</div>
      <div class="space-y-2">
        <div class="bg-amber-900/30 rounded px-3 py-2 text-sm text-slate-300">3-Legged OAuth</div>
        <div class="flex justify-center text-amber-500">&#8595;</div>
        <div class="bg-amber-900/30 rounded px-3 py-2 text-sm font-mono text-amber-300">raps auth login</div>
      </div>
    </div>
    <div class="rounded-lg border-2 border-purple-500/50 bg-purple-950/30 p-4">
      <div class="text-xs font-semibold text-purple-400 uppercase tracking-wide mb-3">RAPS Operations</div>
      <div class="space-y-2">
        <div class="bg-purple-900/30 rounded px-3 py-2 text-sm text-slate-300">List/Navigate</div>
        <div class="bg-purple-900/30 rounded px-3 py-2 text-sm text-slate-300">Download</div>
        <div class="bg-purple-900/30 rounded px-3 py-2 text-sm text-slate-300">Get Metadata</div>
        <div class="bg-purple-900/30 rounded px-3 py-2 text-sm text-slate-300">Get Versions</div>
      </div>
    </div>
    <div class="rounded-lg border-2 border-emerald-500/50 bg-emerald-950/30 p-4">
      <div class="text-xs font-semibold text-emerald-400 uppercase tracking-wide mb-3">Local Processing</div>
      <div class="space-y-2">
        <div class="bg-emerald-900/30 rounded px-3 py-2 text-sm text-slate-300">Local Files</div>
        <div class="flex justify-center text-emerald-500">&#8595;</div>
        <div class="bg-emerald-900/30 rounded px-3 py-2 text-sm text-slate-300">Translate</div>
        <div class="flex justify-center text-emerald-500">&#8595;</div>
        <div class="bg-emerald-900/30 rounded px-3 py-2 text-sm text-slate-300">Extract Data</div>
      </div>
    </div>
  </div>
</div>

---

## CLI Approach

### Step 1: Authenticate

```bash
# Login with 3-legged OAuth (opens browser)
raps auth login

# Or use existing refresh token
raps auth refresh
```

### Step 2: Navigate Project Hierarchy

```bash
# List all hubs (accounts)
raps hub list

# Save hub ID
HUB_ID="b.your-hub-id"

# List projects in hub
raps project list "$HUB_ID"

# Save project ID
PROJECT_ID="b.your-project-id"

# List top-level folders
raps folder list "$PROJECT_ID" --top

# List contents of specific folder
FOLDER_ID="urn:adsk.wipprod:fs.folder:abc123"
raps folder list "$PROJECT_ID" "$FOLDER_ID"
```

### Step 3: Download Files

```bash
# List items in folder
raps folder list "$PROJECT_ID" "$FOLDER_ID" --output json > items.json

# Download specific item
ITEM_ID=$(jq -r '.[0].id' items.json)
raps item download "$PROJECT_ID" "$ITEM_ID" --output ./downloads/

# Download all items in folder
jq -r '.[].id' items.json | while read item_id; do
  raps item download "$PROJECT_ID" "$item_id" --output ./downloads/
done
```

### Step 4: Get Version History

```bash
# List all versions of an item
raps item versions "$PROJECT_ID" "$ITEM_ID" --output json > versions.json

# Download specific version
VERSION_ID=$(jq -r '.[0].id' versions.json)
raps item download "$PROJECT_ID" "$ITEM_ID" --version "$VERSION_ID" --output ./downloads/
```

---

## CI/CD Pipeline

```yaml
# .github/workflows/acc-sync.yml
name: ACC Model Sync

on:
  schedule:
    - cron: '0 6 * * *'  # Daily at 6 AM
  workflow_dispatch:

env:
  HUB_ID: ${{ secrets.ACC_HUB_ID }}
  PROJECT_ID: ${{ secrets.ACC_PROJECT_ID }}
  FOLDER_ID: ${{ secrets.ACC_MODELS_FOLDER_ID }}

jobs:
  sync-models:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Install RAPS
        run: cargo install raps

      - name: Authenticate with ACC
        env:
          APS_CLIENT_ID: ${{ secrets.APS_CLIENT_ID }}
          APS_CLIENT_SECRET: ${{ secrets.APS_CLIENT_SECRET }}
          APS_REFRESH_TOKEN: ${{ secrets.APS_REFRESH_TOKEN }}
        run: |
          raps auth refresh

      - name: Sync models from ACC
        env:
          APS_CLIENT_ID: ${{ secrets.APS_CLIENT_ID }}
          APS_CLIENT_SECRET: ${{ secrets.APS_CLIENT_SECRET }}
        run: |
          mkdir -p ./synced-models

          # List and download all Revit models
          raps folder list "$PROJECT_ID" "$FOLDER_ID" --output json | \
            jq -r '.[] | select(.name | endswith(".rvt")) | .id' | \
            while read item_id; do
              raps item download "$PROJECT_ID" "$item_id" --output ./synced-models/
            done

      - name: Upload to OSS for processing
        env:
          APS_CLIENT_ID: ${{ secrets.APS_CLIENT_ID }}
          APS_CLIENT_SECRET: ${{ secrets.APS_CLIENT_SECRET }}
        run: |
          BUCKET="acc-synced-$(date +%Y%m%d)"
          raps bucket create --key "$BUCKET" --policy transient --region US 2>/dev/null || true

          for model in ./synced-models/*.rvt; do
            [ -f "$model" ] || continue

            key=$(basename "$model")
            raps object upload "$BUCKET" "$model"

            URN=$(raps object urn "$BUCKET" "$key" --output plain)
            raps translate start "$URN" --format svf2
          done

      - name: Generate sync report
        run: |
          echo "# ACC Sync Report" > sync-report.md
          echo "Date: $(date)" >> sync-report.md
          echo "" >> sync-report.md
          echo "## Synced Files" >> sync-report.md
          ls -la ./synced-models/ >> sync-report.md

      - name: Upload artifacts
        uses: actions/upload-artifact@v4
        with:
          name: sync-report
          path: |
            sync-report.md
            ./synced-models/
```

### Pipeline Flow

<div class="not-prose my-6">
  <div class="flex flex-col sm:flex-row items-stretch gap-3">
    <div class="flex-1 rounded-lg border border-blue-500/50 bg-blue-950/30 p-3">
      <div class="text-xs font-semibold text-blue-400 uppercase tracking-wide mb-2">Schedule/Manual</div>
      <div class="bg-blue-900/30 rounded px-3 py-2 text-sm text-slate-300">Daily 6 AM</div>
    </div>
    <div class="hidden sm:flex items-center text-slate-500">&#8594;</div>
    <div class="flex-1 rounded-lg border border-amber-500/50 bg-amber-950/30 p-3">
      <div class="text-xs font-semibold text-amber-400 uppercase tracking-wide mb-2">Authentication</div>
      <div class="bg-amber-900/30 rounded px-3 py-2 text-sm text-slate-300">Refresh Token</div>
    </div>
    <div class="hidden sm:flex items-center text-slate-500">&#8594;</div>
    <div class="flex-1 rounded-lg border border-purple-500/50 bg-purple-950/30 p-3">
      <div class="text-xs font-semibold text-purple-400 uppercase tracking-wide mb-2">ACC Sync</div>
      <div class="space-y-1">
        <div class="bg-purple-900/30 rounded px-3 py-2 text-sm text-slate-300">List Folder</div>
        <div class="bg-purple-900/30 rounded px-3 py-2 text-sm text-slate-300">Download Models</div>
      </div>
    </div>
    <div class="hidden sm:flex items-center text-slate-500">&#8594;</div>
    <div class="flex-1 rounded-lg border border-purple-500/50 bg-purple-950/30 p-3">
      <div class="text-xs font-semibold text-purple-400 uppercase tracking-wide mb-2">OSS Processing</div>
      <div class="space-y-1">
        <div class="bg-purple-900/30 rounded px-3 py-2 text-sm text-slate-300">Upload to Bucket</div>
        <div class="bg-purple-900/30 rounded px-3 py-2 text-sm text-slate-300">Translate SVF2</div>
      </div>
    </div>
    <div class="hidden sm:flex items-center text-slate-500">&#8594;</div>
    <div class="flex-1 rounded-lg border border-emerald-500/50 bg-emerald-950/30 p-3">
      <div class="text-xs font-semibold text-emerald-400 uppercase tracking-wide mb-2">Output</div>
      <div class="space-y-1">
        <div class="bg-emerald-900/30 rounded px-3 py-2 text-sm font-mono text-emerald-300">sync-report.md</div>
        <div class="bg-emerald-900/30 rounded px-3 py-2 text-sm font-mono text-emerald-300">synced-models/</div>
      </div>
    </div>
  </div>
</div>

---

## MCP Integration

### Navigate and Download

```
User: "Download the latest architectural model from the Main Street project in ACC"
```

<div class="not-prose my-6">
  <div class="bg-slate-900/50 rounded-lg border border-slate-700 p-4">
    <div class="flex gap-4 mb-4 text-xs font-semibold">
      <div class="flex-1 text-center py-2 rounded bg-blue-900/30 text-blue-400">User</div>
      <div class="flex-1 text-center py-2 rounded bg-purple-900/30 text-purple-400">AI Assistant</div>
      <div class="flex-1 text-center py-2 rounded bg-amber-900/30 text-amber-400">RAPS MCP</div>
      <div class="flex-1 text-center py-2 rounded bg-emerald-900/30 text-emerald-400">ACC Cloud</div>
    </div>
    <div class="space-y-2 text-sm">
      <div class="flex items-center gap-2">
        <div class="flex-1 text-right text-blue-400">Download Main Street model</div>
        <div class="text-slate-500">&#8594;</div>
        <div class="flex-1 text-purple-400"></div>
        <div class="flex-1"></div>
        <div class="flex-1"></div>
      </div>
      <div class="flex items-center gap-2">
        <div class="flex-1"></div>
        <div class="flex-1 text-right text-purple-400">aps_hub_list()</div>
        <div class="text-slate-500">&#8594;</div>
        <div class="flex-1 text-amber-400"></div>
        <div class="flex-1"></div>
      </div>
      <div class="flex items-center gap-2">
        <div class="flex-1"></div>
        <div class="flex-1"></div>
        <div class="flex-1 text-right text-amber-400">Get hubs</div>
        <div class="text-slate-500">&#8594;</div>
        <div class="flex-1 text-emerald-400"></div>
      </div>
      <div class="flex items-center gap-2">
        <div class="flex-1"></div>
        <div class="flex-1 text-right text-purple-400">aps_project_list()</div>
        <div class="text-slate-500">&#8594;</div>
        <div class="flex-1 text-amber-400"></div>
        <div class="flex-1"></div>
      </div>
      <div class="flex items-center gap-2">
        <div class="flex-1"></div>
        <div class="flex-1"></div>
        <div class="flex-1 text-right text-amber-400">Get projects</div>
        <div class="text-slate-500">&#8594;</div>
        <div class="flex-1 text-emerald-400"></div>
      </div>
      <div class="flex items-center gap-2">
        <div class="flex-1"></div>
        <div class="flex-1 text-right text-purple-400">aps_folder_list()</div>
        <div class="text-slate-500">&#8594;</div>
        <div class="flex-1 text-amber-400"></div>
        <div class="flex-1"></div>
      </div>
      <div class="flex items-center gap-2">
        <div class="flex-1"></div>
        <div class="flex-1"></div>
        <div class="flex-1 text-right text-amber-400">Get contents</div>
        <div class="text-slate-500">&#8594;</div>
        <div class="flex-1 text-emerald-400"></div>
      </div>
      <div class="flex items-center gap-2">
        <div class="flex-1"></div>
        <div class="flex-1 text-right text-purple-400">aps_item_download()</div>
        <div class="text-slate-500">&#8594;</div>
        <div class="flex-1 text-amber-400"></div>
        <div class="flex-1"></div>
      </div>
      <div class="flex items-center gap-2">
        <div class="flex-1"></div>
        <div class="flex-1"></div>
        <div class="flex-1 text-right text-amber-400">Download file</div>
        <div class="text-slate-500">&#8594;</div>
        <div class="flex-1 text-emerald-400"></div>
      </div>
      <div class="flex items-center gap-2">
        <div class="flex-1 text-blue-400"></div>
        <div class="text-slate-500">&#8592;</div>
        <div class="flex-1 text-left text-purple-400">Download complete</div>
        <div class="flex-1"></div>
        <div class="flex-1"></div>
      </div>
    </div>
  </div>
</div>

**AI Response:**
> Downloaded 'MainStreet-Architectural-v42.rvt' (156 MB)
> - **Last modified:** Feb 14, 2024 by John Smith
> - **Version:** 42
> - **Saved to:** ./downloads/MainStreet-Architectural-v42.rvt

### List Recent Changes

```
User: "Show me what models changed in the Main Street project this week"
```

**AI Response:**
> Files modified in Main Street project (Feb 12-16, 2024):
>
> | File | Modified | By | Version |
> |------|----------|-----|---------|
> | Architectural.rvt | Feb 14 | John Smith | v42 |
> | MEP.rvt | Feb 13 | Jane Doe | v28 |
> | Structural.rvt | Feb 12 | Bob Wilson | v31 |
>
> Would you like me to download any of these?

### Sync and Process

```
User: "Sync all the Revit models from the Design folder and translate them"
```

**AI Response:**
> Syncing 5 models from Design folder...
>
> | File | Size | Status |
> |------|------|--------|
> | Building-A.rvt | 124 MB | Downloaded, translating... |
> | Building-B.rvt | 98 MB | Downloaded, translating... |
> | Site.rvt | 45 MB | Downloaded, translated |
> | Landscape.rvt | 23 MB | Downloaded, translated |
> | Parking.rvt | 67 MB | Downloaded, translating... |
>
> All files synced. 3 translations in progress, 2 complete.

---

## Common Patterns

### Incremental Sync

```bash
# Track last sync time
LAST_SYNC=$(cat .last-sync 2>/dev/null || echo "1970-01-01")

# Get items modified since last sync
raps folder list "$PROJECT_ID" "$FOLDER_ID" --output json | \
  jq --arg since "$LAST_SYNC" '[.[] | select(.lastModified > $since)]' | \
  jq -r '.[].id' | while read item_id; do
    raps item download "$PROJECT_ID" "$item_id" --output ./synced/
  done

# Update last sync time
date -Iseconds > .last-sync
```

### Mirror Folder Structure

```bash
# Recursively sync folder structure
sync_folder() {
  local project_id=$1
  local folder_id=$2
  local local_path=$3

  mkdir -p "$local_path"

  raps folder list "$project_id" "$folder_id" --output json | while read -r item; do
    type=$(echo "$item" | jq -r '.type')
    name=$(echo "$item" | jq -r '.name')
    id=$(echo "$item" | jq -r '.id')

    if [ "$type" = "folders" ]; then
      sync_folder "$project_id" "$id" "$local_path/$name"
    else
      raps item download "$project_id" "$id" --output "$local_path/"
    fi
  done
}

sync_folder "$PROJECT_ID" "$FOLDER_ID" "./local-mirror"
```

---

## Related

- [Model Coordination Pipeline](/docs/cookbook-aec-coordination)
- [Model Version Tracking](/docs/cookbook-aec-versioning)
- [Cookbook: AEC & BIM](/docs/cookbook-aec)
