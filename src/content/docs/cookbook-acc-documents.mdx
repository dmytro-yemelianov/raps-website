---
title: "Document Management"
description: "Upload, organize, and share construction documents"
section: "cookbook"
order: 34
icon: "ðŸ“„"
---

# Document Management

Upload, organize, and share construction documents in ACC/BIM 360.

## Workflow Overview

<div class="not-prose my-8">
  <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
    <div class="p-4 bg-blue-900/20 rounded-lg border border-blue-700/50">
      <div class="text-xs font-semibold text-blue-400 uppercase tracking-wider mb-3">Local Files</div>
      <div class="space-y-2">
        <div class="px-3 py-2 bg-slate-800 rounded text-sm text-slate-300">Documents</div>
        <div class="px-3 py-2 bg-slate-800 rounded text-sm text-slate-300">Drawings</div>
        <div class="px-3 py-2 bg-slate-800 rounded text-sm text-slate-300">Models</div>
      </div>
    </div>
    <div class="p-4 bg-purple-900/20 rounded-lg border border-purple-700/50">
      <div class="text-xs font-semibold text-purple-400 uppercase tracking-wider mb-3">Upload Process</div>
      <div class="space-y-2">
        <div class="px-3 py-2 bg-slate-800 rounded text-sm text-slate-300">Select Folder</div>
        <div class="px-3 py-2 bg-slate-800 rounded text-sm text-slate-300">Upload Files</div>
        <div class="px-3 py-2 bg-slate-800 rounded text-sm text-slate-300">Set Metadata</div>
      </div>
    </div>
    <div class="p-4 bg-emerald-900/20 rounded-lg border border-emerald-700/50">
      <div class="text-xs font-semibold text-emerald-400 uppercase tracking-wider mb-3">ACC Storage</div>
      <div class="space-y-2">
        <div class="px-3 py-2 bg-slate-800 rounded text-sm text-slate-300">Project Files</div>
        <div class="px-3 py-2 bg-slate-800 rounded text-sm text-slate-300">Folder Structure</div>
        <div class="px-3 py-2 bg-slate-800 rounded text-sm text-slate-300">Versions</div>
      </div>
    </div>
    <div class="p-4 bg-amber-900/20 rounded-lg border border-amber-700/50">
      <div class="text-xs font-semibold text-amber-400 uppercase tracking-wider mb-3">Sharing</div>
      <div class="space-y-2">
        <div class="px-3 py-2 bg-slate-800 rounded text-sm text-slate-300">Permissions</div>
        <div class="px-3 py-2 bg-slate-800 rounded text-sm text-slate-300">Download Links</div>
        <div class="px-3 py-2 bg-slate-800 rounded text-sm text-slate-300">Notifications</div>
      </div>
    </div>
  </div>
  <div class="flex justify-center mt-4">
    <div class="text-xs text-slate-500">Local â†’ Upload â†’ Storage â†’ Sharing</div>
  </div>
</div>

---

## CLI Approach

### Navigate to Target Folder

```bash
PROJECT_ID="b.project-id"

# List top-level folders
raps folder list "$PROJECT_ID" --top

# Find Project Files folder
FOLDER_ID=$(raps folder list "$PROJECT_ID" --top --output json | \
  jq -r '.[] | select(.name == "Project Files") | .id')

# Create subfolder
raps folder create "$PROJECT_ID" "$FOLDER_ID" --name "Submittals-2024"
```

### Upload Documents

```bash
# Upload single file
raps item upload "$PROJECT_ID" "$FOLDER_ID" ./documents/submittal.pdf

# Upload multiple files
for file in ./documents/*.pdf; do
  raps item upload "$PROJECT_ID" "$FOLDER_ID" "$file"
  echo "Uploaded: $(basename "$file")"
done
```

### Organize with Folder Structure

```bash
# Create folder structure
PARENT_ID="$FOLDER_ID"

for folder in "Specs" "Drawings" "Submittals" "RFIs"; do
  raps folder create "$PROJECT_ID" "$PARENT_ID" --name "$folder"
done

# Upload to specific folders
SPECS_ID=$(raps folder list "$PROJECT_ID" "$PARENT_ID" --output json | \
  jq -r '.[] | select(.name == "Specs") | .id')

for spec in ./specs/*.pdf; do
  raps item upload "$PROJECT_ID" "$SPECS_ID" "$spec"
done
```

### Download Documents

```bash
ITEM_ID="item-123"

# Download latest version
raps item download "$PROJECT_ID" "$ITEM_ID" --output ./downloads/

# Download specific version
VERSION_ID="version-456"
raps item download "$PROJECT_ID" "$ITEM_ID" --version "$VERSION_ID" --output ./downloads/

# Batch download folder contents
raps folder list "$PROJECT_ID" "$FOLDER_ID" --output json | \
  jq -r '.[] | select(.type == "items") | .id' | while read id; do
    raps item download "$PROJECT_ID" "$id" --output ./downloads/
  done
```

---

## CI/CD Pipeline

```yaml
# .github/workflows/document-sync.yml
name: Document Sync Pipeline

on:
  push:
    paths:
      - 'docs/**'
  workflow_dispatch:

env:
  PROJECT_ID: ${{ secrets.ACC_PROJECT_ID }}
  TARGET_FOLDER: ${{ secrets.ACC_DOCS_FOLDER_ID }}

jobs:
  sync-documents:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 2

      - name: Install RAPS
        run: cargo install raps

      - name: Authenticate
        env:
          APS_CLIENT_ID: ${{ secrets.APS_CLIENT_ID }}
          APS_CLIENT_SECRET: ${{ secrets.APS_CLIENT_SECRET }}
          APS_REFRESH_TOKEN: ${{ secrets.APS_REFRESH_TOKEN }}
        run: raps auth refresh

      - name: Upload changed documents
        env:
          APS_CLIENT_ID: ${{ secrets.APS_CLIENT_ID }}
          APS_CLIENT_SECRET: ${{ secrets.APS_CLIENT_SECRET }}
        run: |
          CHANGED=$(git diff --name-only HEAD~1 HEAD -- 'docs/**')

          for file in $CHANGED; do
            if [ -f "$file" ]; then
              echo "Uploading: $file"
              raps item upload "$PROJECT_ID" "$TARGET_FOLDER" "$file"
            fi
          done

      - name: Generate upload report
        run: |
          echo "# Document Upload Report" > upload-report.md
          echo "Commit: ${{ github.sha }}" >> upload-report.md
          echo "Date: $(date)" >> upload-report.md
          echo "" >> upload-report.md
          echo "## Uploaded Files" >> upload-report.md

          git diff --name-only HEAD~1 HEAD -- 'docs/**' | while read file; do
            if [ -f "$file" ]; then
              echo "- $file" >> upload-report.md
            fi
          done

      - name: Upload report
        uses: actions/upload-artifact@v4
        with:
          name: upload-report
          path: upload-report.md
```

### Pipeline Flow

<div class="not-prose my-6">
  <div class="flex flex-col sm:flex-row items-stretch gap-3">
    <div class="flex-1 p-3 bg-slate-800/50 rounded-lg border border-slate-700">
      <div class="text-xs font-semibold text-slate-400 uppercase mb-2">Git Push</div>
      <div class="px-3 py-2 bg-slate-900 rounded text-sm text-white">docs/ changed</div>
    </div>
    <div class="hidden sm:flex items-center text-slate-600">â†’</div>
    <div class="flex-1 p-3 bg-slate-800/50 rounded-lg border border-slate-700">
      <div class="text-xs font-semibold text-slate-400 uppercase mb-2">Detection</div>
      <div class="px-2 py-1 bg-slate-900 rounded text-xs text-slate-300">Find changed files</div>
    </div>
    <div class="hidden sm:flex items-center text-slate-600">â†’</div>
    <div class="flex-1 p-3 bg-slate-800/50 rounded-lg border border-slate-700">
      <div class="text-xs font-semibold text-slate-400 uppercase mb-2">Upload</div>
      <div class="space-y-1">
        <div class="px-2 py-1 bg-slate-900 rounded text-xs text-slate-300">Authenticate</div>
        <div class="px-2 py-1 bg-slate-900 rounded text-xs text-slate-300">Upload each file</div>
      </div>
    </div>
    <div class="hidden sm:flex items-center text-slate-600">â†’</div>
    <div class="flex-1 p-3 bg-slate-800/50 rounded-lg border border-slate-700">
      <div class="text-xs font-semibold text-slate-400 uppercase mb-2">Report</div>
      <div class="px-2 py-1 bg-slate-900 rounded text-xs text-emerald-400 font-mono">upload-report.md</div>
    </div>
  </div>
</div>

---

## MCP Integration

### Upload Documents

```
User: "Upload all the PDF specs to the Main Street project"
```

<div class="not-prose my-6">
  <div class="bg-slate-900/50 rounded-lg border border-slate-700 p-4">
    <div class="flex justify-around mb-4 text-xs font-semibold text-slate-400">
      <span class="px-3 py-1 bg-slate-800 rounded">User</span>
      <span class="px-3 py-1 bg-blue-900/50 rounded text-blue-400">AI Assistant</span>
      <span class="px-3 py-1 bg-amber-900/50 rounded text-amber-400">RAPS MCP</span>
      <span class="px-3 py-1 bg-emerald-900/50 rounded text-emerald-400">ACC Cloud</span>
    </div>
    <div class="space-y-2 text-xs">
      <div class="flex items-center gap-2">
        <span class="w-16 text-slate-400">User</span>
        <span class="flex-1 h-px bg-slate-700"></span>
        <span class="px-2 py-1 bg-slate-800 rounded text-slate-300">Upload specs to Main Street</span>
        <span class="flex-1 h-px bg-slate-700"></span>
        <span class="w-16 text-blue-400">AI</span>
      </div>
      <div class="flex items-center gap-2">
        <span class="w-16 text-blue-400">AI</span>
        <span class="flex-1 h-px bg-blue-700/50"></span>
        <span class="px-2 py-1 bg-blue-900/30 rounded text-blue-300 font-mono">aps_project_list(hub_id)</span>
        <span class="flex-1 h-px bg-blue-700/50"></span>
        <span class="w-16 text-amber-400">MCP</span>
      </div>
      <div class="flex items-center gap-2">
        <span class="w-16 text-blue-400">AI</span>
        <span class="flex-1 h-px bg-blue-700/50"></span>
        <span class="px-2 py-1 bg-blue-900/30 rounded text-blue-300 font-mono">aps_folder_list(project_id, top=true)</span>
        <span class="flex-1 h-px bg-blue-700/50"></span>
        <span class="w-16 text-amber-400">MCP</span>
      </div>
      <div class="flex items-center gap-2 pl-16">
        <span class="px-2 py-1 bg-blue-900/20 rounded text-blue-300 text-xs">AI: Find Specs folder</span>
      </div>
      <div class="flex items-center gap-2 pl-16">
        <span class="px-2 py-1 bg-purple-900/20 rounded text-purple-300 text-xs">Loop: For each PDF</span>
      </div>
      <div class="flex items-center gap-2 ml-4">
        <span class="w-12 text-blue-400">AI</span>
        <span class="flex-1 h-px bg-blue-700/50"></span>
        <span class="px-2 py-1 bg-blue-900/30 rounded text-blue-300 font-mono text-xs">aps_item_upload(...)</span>
        <span class="flex-1 h-px bg-amber-700/50"></span>
        <span class="w-12 text-emerald-400">ACC</span>
      </div>
      <div class="flex items-center gap-2">
        <span class="w-16 text-blue-400">AI</span>
        <span class="flex-1 h-px bg-slate-700"></span>
        <span class="px-2 py-1 bg-slate-800 rounded text-slate-300">Upload summary</span>
        <span class="flex-1 h-px bg-slate-700"></span>
        <span class="w-16 text-slate-400">User</span>
      </div>
    </div>
  </div>
</div>

**AI Response:**
> Uploaded 12 PDF specifications to Main Street project:
>
> **Location:** Project Files / Specs
>
> | File | Size | Status |
> |------|------|--------|
> | 01-General.pdf | 2.4 MB | Uploaded |
> | 02-Site.pdf | 1.8 MB | Uploaded |
> | 03-Concrete.pdf | 3.2 MB | Uploaded |
> | ... | ... | ... |
>
> All files uploaded successfully.

### Download Project Documents

```
User: "Download all drawings from the current project"
```

**AI Response:**
> Downloading drawings from Main Street project...
>
> **Found:** 45 files in Drawings folder
> **Total size:** 234 MB
>
> Progress: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%
>
> Downloaded to: ./downloads/Main-Street-Drawings/
> - Architectural/ (18 files)
> - Structural/ (12 files)
> - MEP/ (15 files)

---

## Advanced Operations

### Mirror Folder Structure

```bash
#!/bin/bash
# mirror-to-acc.sh

mirror_folder() {
  local local_path=$1
  local project_id=$2
  local parent_id=$3

  for item in "$local_path"/*; do
    name=$(basename "$item")

    if [ -d "$item" ]; then
      # Create folder and recurse
      NEW_ID=$(raps folder create "$project_id" "$parent_id" --name "$name" --output json | jq -r '.id')
      mirror_folder "$item" "$project_id" "$NEW_ID"
    else
      # Upload file
      raps item upload "$project_id" "$parent_id" "$item"
    fi
  done
}

mirror_folder "./project-docs" "$PROJECT_ID" "$FOLDER_ID"
```

### Version History Export

```bash
ITEM_ID="item-123"

# Get all versions
raps item versions "$PROJECT_ID" "$ITEM_ID" --output json > versions.json

# Export version history
jq -r '["Version", "Date", "User", "Size"], (.[] | [.versionNumber, .createdAt, .createdBy, .size]) | @csv' versions.json > version-history.csv
```

### Search Documents

```bash
# Search by name pattern
raps folder list "$PROJECT_ID" "$FOLDER_ID" --output json | \
  jq -r '.[] | select(.name | test(".*spec.*"; "i")) | .name'

# Search recursively (requires custom script)
search_folder() {
  local project_id=$1
  local folder_id=$2
  local pattern=$3

  raps folder list "$project_id" "$folder_id" --output json | jq -c '.[]' | while read item; do
    type=$(echo "$item" | jq -r '.type')
    name=$(echo "$item" | jq -r '.name')
    id=$(echo "$item" | jq -r '.id')

    if echo "$name" | grep -qi "$pattern"; then
      echo "$name: $id"
    fi

    if [ "$type" = "folders" ]; then
      search_folder "$project_id" "$id" "$pattern"
    fi
  done
}
```

---

## Related

- [Project Navigation](/docs/cookbook-acc-navigation)
- [BIM 360/ACC Sync](/docs/cookbook-aec-acc-sync)
- [Cookbook: Construction](/docs/cookbook-construction)
