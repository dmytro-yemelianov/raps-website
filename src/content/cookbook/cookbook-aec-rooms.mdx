---
title: "Room & Space Export"
description: "Export room schedules and spatial data from BIM models"
category: "aec"
order: 14
icon: "üè†"
---

# Room & Space Export

Extract room schedules and spatial data from Revit models.

## Workflow Overview

<div class="not-prose my-8">
  <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
    <div class="rounded-lg border-2 border-blue-500/50 bg-blue-950/30 p-4">
      <div class="text-xs font-semibold text-blue-400 uppercase tracking-wide mb-3">Input</div>
      <div class="bg-blue-900/30 rounded px-3 py-2 text-sm text-slate-300 text-center">
        Revit Model<br/><span class="text-blue-400 text-xs">with Rooms</span>
      </div>
    </div>
    <div class="rounded-lg border-2 border-purple-500/50 bg-purple-950/30 p-4">
      <div class="text-xs font-semibold text-purple-400 uppercase tracking-wide mb-3">Processing</div>
      <div class="space-y-2">
        <div class="bg-purple-900/30 rounded px-3 py-2 text-sm text-slate-300">Translate to SVF2</div>
        <div class="flex justify-center text-purple-500">&#8595;</div>
        <div class="bg-purple-900/30 rounded px-3 py-2 text-sm text-slate-300">Extract Properties</div>
        <div class="flex justify-center text-purple-500">&#8595;</div>
        <div class="bg-purple-900/30 rounded px-3 py-2 text-sm text-slate-300">Filter by Category<br/><span class="text-purple-400 text-xs">Revit Rooms</span></div>
      </div>
    </div>
    <div class="rounded-lg border-2 border-amber-500/50 bg-amber-950/30 p-4">
      <div class="text-xs font-semibold text-amber-400 uppercase tracking-wide mb-3">Room Data</div>
      <div class="space-y-2">
        <div class="bg-amber-900/30 rounded px-3 py-2 text-sm text-slate-300">Name</div>
        <div class="bg-amber-900/30 rounded px-3 py-2 text-sm text-slate-300">Number</div>
        <div class="bg-amber-900/30 rounded px-3 py-2 text-sm text-slate-300">Area</div>
        <div class="bg-amber-900/30 rounded px-3 py-2 text-sm text-slate-300">Level</div>
        <div class="bg-amber-900/30 rounded px-3 py-2 text-sm text-slate-300">Department</div>
      </div>
    </div>
    <div class="rounded-lg border-2 border-emerald-500/50 bg-emerald-950/30 p-4">
      <div class="text-xs font-semibold text-emerald-400 uppercase tracking-wide mb-3">Export Formats</div>
      <div class="space-y-2">
        <div class="bg-emerald-900/30 rounded px-3 py-2 text-sm text-slate-300">CSV Schedule</div>
        <div class="bg-emerald-900/30 rounded px-3 py-2 text-sm text-slate-300">JSON Export</div>
        <div class="bg-emerald-900/30 rounded px-3 py-2 text-sm text-slate-300">Database Import</div>
      </div>
    </div>
  </div>
  <div class="flex justify-center mt-4">
    <div class="flex items-center gap-2 text-slate-500 text-sm">
      <span>Input</span>
      <span>&#8594;</span>
      <span>Process</span>
      <span>&#8594;</span>
      <span>Data</span>
      <span>&#8594;</span>
      <span>Export</span>
    </div>
  </div>
</div>

---

## CLI Approach

### Step 1: Translate Model

```bash
URN=$(raps object urn my-bucket building.rvt --output plain)
raps translate start "$URN" --format svf2 --wait
```

### Step 2: Extract All Properties

```bash
raps derivative properties "$URN" --output json > all-properties.json
```

### Step 3: Filter Rooms

```bash
cat all-properties.json | jq '[.[] | select(.category == "Revit Rooms")]' > rooms.json
```

### Step 4: Export to CSV

```bash
cat rooms.json | jq -r '
  ["Name", "Number", "Area", "Level", "Department"],
  (.[] | [
    .properties["Name"] // "",
    .properties["Number"] // "",
    .properties["Area"] // "",
    .properties["Level"] // "",
    .properties["Department"] // ""
  ]) | @csv
' > rooms.csv
```

### Step 5: Generate Summary

```bash
echo "Room Summary"
echo "============"
echo "Total rooms: $(jq 'length' rooms.json)"
echo "Total area: $(jq '[.[].properties.Area | select(. != null) | tonumber] | add' rooms.json) sq ft"
echo ""
echo "By Level:"
jq -r 'group_by(.properties.Level) | .[] | "  \(.[0].properties.Level): \(length) rooms"' rooms.json
echo ""
echo "By Department:"
jq -r 'group_by(.properties.Department) | .[] | "  \(.[0].properties.Department // "Unassigned"): \(length) rooms"' rooms.json
```

---

## CI/CD Pipeline

```yaml
# .github/workflows/room-export.yml
name: Room Schedule Export

on:
  workflow_dispatch:
    inputs:
      bucket:
        description: 'Bucket name'
        required: true
      model:
        description: 'Model filename'
        required: true

jobs:
  export-rooms:
    runs-on: ubuntu-latest
    steps:
      - name: Install RAPS
        run: cargo install raps

      - name: Extract room data
        env:
          APS_CLIENT_ID: ${{ secrets.APS_CLIENT_ID }}
          APS_CLIENT_SECRET: ${{ secrets.APS_CLIENT_SECRET }}
        run: |
          URN=$(raps object urn "${{ inputs.bucket }}" "${{ inputs.model }}" --output plain)

          # Get all properties
          raps derivative properties "$URN" --output json > properties.json

          # Filter rooms
          jq '[.[] | select(.category == "Revit Rooms")]' properties.json > rooms.json

          # Create CSV
          jq -r '
            ["Name","Number","Area","Level","Department"],
            (.[] | [
              .properties["Name"],
              .properties["Number"],
              .properties["Area"],
              .properties["Level"],
              .properties["Department"]
            ]) | @csv
          ' rooms.json > rooms.csv

      - name: Generate summary report
        run: |
          echo "# Room Schedule Export" > summary.md
          echo "Model: ${{ inputs.model }}" >> summary.md
          echo "Date: $(date)" >> summary.md
          echo "" >> summary.md
          echo "## Statistics" >> summary.md
          echo "- Total Rooms: $(jq 'length' rooms.json)" >> summary.md
          echo "" >> summary.md
          echo "## By Level" >> summary.md
          jq -r 'group_by(.properties.Level) | .[] | "- \(.[0].properties.Level): \(length) rooms"' rooms.json >> summary.md
          echo "" >> summary.md
          echo "## By Department" >> summary.md
          jq -r 'group_by(.properties.Department) | .[] | "- \(.[0].properties.Department // "Unassigned"): \(length) rooms"' rooms.json >> summary.md

      - name: Upload exports
        uses: actions/upload-artifact@v4
        with:
          name: room-schedule
          path: |
            rooms.json
            rooms.csv
            summary.md
```

### Pipeline Flow

<div class="not-prose my-6">
  <div class="flex flex-col sm:flex-row items-stretch gap-3">
    <div class="flex-1 rounded-lg border border-blue-500/50 bg-blue-950/30 p-3">
      <div class="text-xs font-semibold text-blue-400 uppercase tracking-wide mb-2">Manual Trigger</div>
      <div class="bg-blue-900/30 rounded px-3 py-2 text-sm text-slate-300">bucket + model inputs</div>
    </div>
    <div class="hidden sm:flex items-center text-slate-500">&#8594;</div>
    <div class="flex-1 rounded-lg border border-purple-500/50 bg-purple-950/30 p-3">
      <div class="text-xs font-semibold text-purple-400 uppercase tracking-wide mb-2">Extraction</div>
      <div class="space-y-1">
        <div class="bg-purple-900/30 rounded px-3 py-1.5 text-sm text-slate-300">Get URN</div>
        <div class="bg-purple-900/30 rounded px-3 py-1.5 text-sm text-slate-300">Get Properties</div>
        <div class="bg-purple-900/30 rounded px-3 py-1.5 text-sm text-slate-300">Filter Rooms</div>
      </div>
    </div>
    <div class="hidden sm:flex items-center text-slate-500">&#8594;</div>
    <div class="flex-1 rounded-lg border border-amber-500/50 bg-amber-950/30 p-3">
      <div class="text-xs font-semibold text-amber-400 uppercase tracking-wide mb-2">Export</div>
      <div class="space-y-1">
        <div class="bg-amber-900/30 rounded px-3 py-1.5 text-sm font-mono text-amber-300">rooms.json</div>
        <div class="bg-amber-900/30 rounded px-3 py-1.5 text-sm font-mono text-amber-300">rooms.csv</div>
        <div class="bg-amber-900/30 rounded px-3 py-1.5 text-sm font-mono text-amber-300">summary.md</div>
      </div>
    </div>
    <div class="hidden sm:flex items-center text-slate-500">&#8594;</div>
    <div class="flex-1 rounded-lg border border-emerald-500/50 bg-emerald-950/30 p-3">
      <div class="text-xs font-semibold text-emerald-400 uppercase tracking-wide mb-2">Output</div>
      <div class="bg-emerald-900/30 rounded px-3 py-2 text-sm font-mono text-emerald-300">room-schedule.zip</div>
    </div>
  </div>
</div>

---

## MCP Integration

### Export Room Schedule

```
User: "Get me a room schedule from the office building model with areas by department"
```

<div class="not-prose my-6">
  <div class="bg-slate-900/50 rounded-lg border border-slate-700 p-4">
    <div class="flex gap-4 mb-4 text-xs font-semibold">
      <div class="flex-1 text-center py-2 rounded bg-blue-900/30 text-blue-400">User</div>
      <div class="flex-1 text-center py-2 rounded bg-purple-900/30 text-purple-400">AI Assistant</div>
      <div class="flex-1 text-center py-2 rounded bg-amber-900/30 text-amber-400">RAPS MCP</div>
      <div class="flex-1 text-center py-2 rounded bg-emerald-900/30 text-emerald-400">APS Cloud</div>
    </div>
    <div class="space-y-2 text-sm">
      <div class="flex items-center gap-2">
        <div class="flex-1 text-right text-blue-400">Export room schedule by department</div>
        <div class="text-slate-500">&#8594;</div>
        <div class="flex-1 text-purple-400"></div>
        <div class="flex-1"></div>
        <div class="flex-1"></div>
      </div>
      <div class="flex items-center gap-2">
        <div class="flex-1"></div>
        <div class="flex-1 text-right text-purple-400">aps_object_urn()</div>
        <div class="text-slate-500">&#8594;</div>
        <div class="flex-1 text-amber-400"></div>
        <div class="flex-1"></div>
      </div>
      <div class="flex items-center gap-2">
        <div class="flex-1"></div>
        <div class="flex-1 text-purple-400"></div>
        <div class="text-slate-500">&#8592;</div>
        <div class="flex-1 text-left text-amber-400">URN</div>
        <div class="flex-1"></div>
      </div>
      <div class="flex items-center gap-2">
        <div class="flex-1"></div>
        <div class="flex-1 text-right text-purple-400">aps_derivative_properties()</div>
        <div class="text-slate-500">&#8594;</div>
        <div class="flex-1 text-amber-400"></div>
        <div class="flex-1"></div>
      </div>
      <div class="flex items-center gap-2">
        <div class="flex-1"></div>
        <div class="flex-1"></div>
        <div class="flex-1 text-right text-amber-400">Get all properties</div>
        <div class="text-slate-500">&#8594;</div>
        <div class="flex-1 text-emerald-400"></div>
      </div>
      <div class="flex items-center gap-2">
        <div class="flex-1"></div>
        <div class="flex-1"></div>
        <div class="flex-1 text-amber-400"></div>
        <div class="text-slate-500">&#8592;</div>
        <div class="flex-1 text-left text-emerald-400">Properties JSON</div>
      </div>
      <div class="flex items-center gap-2">
        <div class="flex-1"></div>
        <div class="flex-1 text-center text-purple-400 italic">Filter rooms, group by department</div>
        <div class="flex-1"></div>
        <div class="flex-1"></div>
      </div>
      <div class="flex items-center gap-2">
        <div class="flex-1 text-blue-400"></div>
        <div class="text-slate-500">&#8592;</div>
        <div class="flex-1 text-left text-purple-400">Room schedule table</div>
        <div class="flex-1"></div>
        <div class="flex-1"></div>
      </div>
    </div>
  </div>
</div>

**AI Response:**
> Room Schedule for Office Building:
>
> | Department | Rooms | Total Area (sq ft) |
> |------------|-------|-------------------|
> | Executive | 8 | 4,200 |
> | Engineering | 24 | 12,800 |
> | Sales | 16 | 8,400 |
> | HR | 6 | 2,100 |
> | Common | 12 | 6,500 |
>
> **Total:** 66 rooms, 34,000 sq ft

### Find Specific Rooms

```
User: "Find all conference rooms larger than 500 sq ft"
```

**AI Response:**
> Found 8 conference rooms over 500 sq ft:
>
> | Name | Number | Area | Level |
> |------|--------|------|-------|
> | Board Room | 301 | 1,200 | 3 |
> | Conference A | 201 | 800 | 2 |
> | Conference B | 202 | 750 | 2 |
> | Training Room | 105 | 650 | 1 |
> | ... | ... | ... | ... |

---

## Advanced Queries

### Rooms by Level with Areas

```bash
cat rooms.json | jq '
  group_by(.properties.Level) |
  map({
    level: .[0].properties.Level,
    count: length,
    totalArea: ([.[].properties.Area | select(. != null) | tonumber] | add),
    rooms: [.[] | {name: .properties.Name, number: .properties.Number, area: .properties.Area}]
  })'
```

### Find Unassigned Rooms

```bash
cat rooms.json | jq '[.[] | select(.properties.Department == null or .properties.Department == "")]'
```

### Area Statistics

```bash
cat rooms.json | jq '
  {
    total: ([.[].properties.Area | select(. != null) | tonumber] | add),
    average: ([.[].properties.Area | select(. != null) | tonumber] | add / length),
    min: ([.[].properties.Area | select(. != null) | tonumber] | min),
    max: ([.[].properties.Area | select(. != null) | tonumber] | max)
  }'
```

### Export for Space Management System

```bash
cat rooms.json | jq '[.[] | {
  id: .objectid,
  name: .properties.Name,
  number: .properties.Number,
  level: .properties.Level,
  department: .properties.Department,
  area_sqft: (.properties.Area | tonumber),
  area_sqm: ((.properties.Area | tonumber) * 0.0929)
}]' > space-management-import.json
```

---

## Related

- [Metadata Extraction](/cookbook/cookbook-aec-metadata)
- [Model Coordination Pipeline](/cookbook/cookbook-aec-coordination)
- [Cookbook: AEC & BIM](/cookbook/cookbook-aec)
