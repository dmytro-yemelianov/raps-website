---
title: "Cross-Project Reporting"
description: "Aggregate data across multiple ACC projects"
category: "construction"
order: 38
icon: "ðŸ“ˆ"
---

# Cross-Project Reporting

Aggregate and analyze data across multiple ACC projects for portfolio insights.

## Workflow Overview

<div class="not-prose my-8">
  <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
    <div class="p-4 bg-blue-900/20 rounded-lg border border-blue-700/50">
      <div class="text-xs font-semibold text-blue-400 uppercase tracking-wider mb-3">Multiple Projects</div>
      <div class="space-y-2">
        <div class="px-3 py-2 bg-slate-800 rounded text-sm text-slate-300">Project A</div>
        <div class="px-3 py-2 bg-slate-800 rounded text-sm text-slate-300">Project B</div>
        <div class="px-3 py-2 bg-slate-800 rounded text-sm text-slate-300">Project C</div>
      </div>
    </div>
    <div class="p-4 bg-purple-900/20 rounded-lg border border-purple-700/50">
      <div class="text-xs font-semibold text-purple-400 uppercase tracking-wider mb-3">Data Collection</div>
      <div class="space-y-2">
        <div class="px-3 py-2 bg-slate-800 rounded text-sm text-slate-300">Issues</div>
        <div class="px-3 py-2 bg-slate-800 rounded text-sm text-slate-300">RFIs</div>
        <div class="px-3 py-2 bg-slate-800 rounded text-sm text-slate-300">Submittals</div>
        <div class="px-3 py-2 bg-slate-800 rounded text-sm text-slate-300">Checklists</div>
      </div>
    </div>
    <div class="p-4 bg-amber-900/20 rounded-lg border border-amber-700/50">
      <div class="text-xs font-semibold text-amber-400 uppercase tracking-wider mb-3">Aggregation</div>
      <div class="space-y-2">
        <div class="px-3 py-2 bg-slate-800 rounded text-sm text-slate-300">Combine Data</div>
        <div class="px-3 py-2 bg-slate-800 rounded text-sm text-slate-300">Normalize Fields</div>
        <div class="px-3 py-2 bg-slate-800 rounded text-sm text-slate-300">Add Project Context</div>
      </div>
    </div>
    <div class="p-4 bg-emerald-900/20 rounded-lg border border-emerald-700/50">
      <div class="text-xs font-semibold text-emerald-400 uppercase tracking-wider mb-3">Reports</div>
      <div class="space-y-2">
        <div class="px-3 py-2 bg-slate-800 rounded text-sm text-slate-300">Portfolio Summary</div>
        <div class="px-3 py-2 bg-slate-800 rounded text-sm text-slate-300">Cross-Project Metrics</div>
        <div class="px-3 py-2 bg-slate-800 rounded text-sm text-slate-300">Executive Dashboard</div>
      </div>
    </div>
  </div>
  <div class="flex justify-center mt-4">
    <div class="text-xs text-slate-500">Projects â†’ Data â†’ Aggregation â†’ Reports</div>
  </div>
</div>

---

## CLI Approach

### Get All Projects

```bash
HUB_ID="b.hub-id"

# List all projects
raps project list "$HUB_ID" --output json > projects.json

# Filter active construction projects
cat projects.json | jq '[.[] | select(.status == "active")]' > active-projects.json
```

### Aggregate Issues Across Projects

```bash
# Collect issues from all projects
echo '[]' > all-issues.json

jq -r '.[].id' active-projects.json | while read proj_id; do
  PROJ_NAME=$(jq -r ".[] | select(.id == \"$proj_id\") | .name" active-projects.json)

  raps acc issue list "$proj_id" --output json 2>/dev/null | \
    jq --arg proj "$proj_id" --arg name "$PROJ_NAME" \
    '[.[] | . + {projectId: $proj, projectName: $name}]' >> temp-issues.json
done

# Combine all
cat temp-issues.json | jq -s 'flatten' > all-issues.json
rm temp-issues.json
```

### Portfolio Summary

```bash
# Generate portfolio-wide summary
cat all-issues.json | jq '
  {
    totalIssues: length,
    openIssues: [.[] | select(.status == "open")] | length,
    byProject: (group_by(.projectName) | map({
      project: .[0].projectName,
      total: length,
      open: [.[] | select(.status == "open")] | length
    })),
    byPriority: (group_by(.priority) | map({
      priority: .[0].priority,
      count: length
    }))
  }'
```

### Cross-Project Comparison

```bash
# Compare metrics across projects
echo "# Portfolio Comparison" > portfolio-report.md
echo "" >> portfolio-report.md

jq -r '.[].id' active-projects.json | while read proj_id; do
  PROJ_NAME=$(jq -r ".[] | select(.id == \"$proj_id\") | .name" active-projects.json)

  # Get metrics
  ISSUES=$(jq --arg p "$proj_id" '[.[] | select(.projectId == $p)] | length' all-issues.json)
  OPEN=$(jq --arg p "$proj_id" '[.[] | select(.projectId == $p and .status == "open")] | length' all-issues.json)

  echo "## $PROJ_NAME" >> portfolio-report.md
  echo "- Total Issues: $ISSUES" >> portfolio-report.md
  echo "- Open Issues: $OPEN" >> portfolio-report.md
  echo "" >> portfolio-report.md
done
```

---

## CI/CD Pipeline

```yaml
# .github/workflows/portfolio-report.yml
name: Portfolio Reporting

on:
  schedule:
    - cron: '0 6 * * 1'  # Weekly on Monday
  workflow_dispatch:

env:
  HUB_ID: ${{ secrets.ACC_HUB_ID }}

jobs:
  portfolio-report:
    runs-on: ubuntu-latest
    steps:
      - name: Install RAPS
        run: cargo install raps

      - name: Authenticate
        env:
          APS_CLIENT_ID: ${{ secrets.APS_CLIENT_ID }}
          APS_CLIENT_SECRET: ${{ secrets.APS_CLIENT_SECRET }}
          APS_REFRESH_TOKEN: ${{ secrets.APS_REFRESH_TOKEN }}
        run: raps auth refresh

      - name: Get all projects
        env:
          APS_CLIENT_ID: ${{ secrets.APS_CLIENT_ID }}
          APS_CLIENT_SECRET: ${{ secrets.APS_CLIENT_SECRET }}
        run: |
          mkdir -p ./portfolio

          raps project list "$HUB_ID" --output json > ./portfolio/projects.json
          jq '[.[] | select(.status == "active")]' ./portfolio/projects.json > ./portfolio/active.json

      - name: Collect cross-project data
        env:
          APS_CLIENT_ID: ${{ secrets.APS_CLIENT_ID }}
          APS_CLIENT_SECRET: ${{ secrets.APS_CLIENT_SECRET }}
        run: |
          echo '[]' > ./portfolio/all-issues.json
          echo '[]' > ./portfolio/all-rfis.json
          echo '[]' > ./portfolio/all-submittals.json

          jq -r '.[].id' ./portfolio/active.json | while read proj_id; do
            NAME=$(jq -r ".[] | select(.id == \"$proj_id\") | .name" ./portfolio/active.json)

            # Issues
            raps acc issue list "$proj_id" --output json 2>/dev/null | \
              jq --arg p "$proj_id" --arg n "$NAME" '[.[] | . + {projectId: $p, projectName: $n}]' >> ./portfolio/temp-issues.json || true

            # RFIs
            raps acc rfi list "$proj_id" --output json 2>/dev/null | \
              jq --arg p "$proj_id" --arg n "$NAME" '[.[] | . + {projectId: $p, projectName: $n}]' >> ./portfolio/temp-rfis.json || true

            # Submittals
            raps acc submittal list "$proj_id" --output json 2>/dev/null | \
              jq --arg p "$proj_id" --arg n "$NAME" '[.[] | . + {projectId: $p, projectName: $n}]' >> ./portfolio/temp-submittals.json || true
          done

          # Combine files
          cat ./portfolio/temp-issues.json 2>/dev/null | jq -s 'flatten' > ./portfolio/all-issues.json || echo '[]' > ./portfolio/all-issues.json
          cat ./portfolio/temp-rfis.json 2>/dev/null | jq -s 'flatten' > ./portfolio/all-rfis.json || echo '[]' > ./portfolio/all-rfis.json
          cat ./portfolio/temp-submittals.json 2>/dev/null | jq -s 'flatten' > ./portfolio/all-submittals.json || echo '[]' > ./portfolio/all-submittals.json

      - name: Generate portfolio report
        run: |
          echo "# Portfolio Report" > ./portfolio/report.md
          echo "Generated: $(date)" >> ./portfolio/report.md
          echo "" >> ./portfolio/report.md

          PROJECTS=$(jq 'length' ./portfolio/active.json)
          echo "## Overview" >> ./portfolio/report.md
          echo "Active Projects: $PROJECTS" >> ./portfolio/report.md
          echo "" >> ./portfolio/report.md

          # Issues summary
          echo "## Issues Summary" >> ./portfolio/report.md
          TOTAL_ISSUES=$(jq 'length' ./portfolio/all-issues.json)
          OPEN_ISSUES=$(jq '[.[] | select(.status == "open")] | length' ./portfolio/all-issues.json)
          echo "- Total: $TOTAL_ISSUES" >> ./portfolio/report.md
          echo "- Open: $OPEN_ISSUES" >> ./portfolio/report.md
          echo "" >> ./portfolio/report.md

          # By project table
          echo "## By Project" >> ./portfolio/report.md
          echo "| Project | Issues | Open | RFIs | Submittals |" >> ./portfolio/report.md
          echo "|---------|--------|------|------|------------|" >> ./portfolio/report.md

          jq -r '.[].name' ./portfolio/active.json | while read name; do
            ISSUES=$(jq --arg n "$name" '[.[] | select(.projectName == $n)] | length' ./portfolio/all-issues.json)
            OPEN=$(jq --arg n "$name" '[.[] | select(.projectName == $n and .status == "open")] | length' ./portfolio/all-issues.json)
            RFIS=$(jq --arg n "$name" '[.[] | select(.projectName == $n)] | length' ./portfolio/all-rfis.json)
            SUBS=$(jq --arg n "$name" '[.[] | select(.projectName == $n)] | length' ./portfolio/all-submittals.json)
            echo "| $name | $ISSUES | $OPEN | $RFIS | $SUBS |" >> ./portfolio/report.md
          done

      - name: Upload report
        uses: actions/upload-artifact@v4
        with:
          name: portfolio-report
          path: ./portfolio/
```

### Pipeline Flow

<div class="not-prose my-6">
  <div class="flex flex-col sm:flex-row items-stretch gap-3">
    <div class="flex-1 p-3 bg-slate-800/50 rounded-lg border border-slate-700">
      <div class="text-xs font-semibold text-slate-400 uppercase mb-2">Weekly Monday</div>
      <div class="px-3 py-2 bg-slate-900 rounded text-sm text-white">Schedule</div>
    </div>
    <div class="hidden sm:flex items-center text-slate-600">â†’</div>
    <div class="flex-1 p-3 bg-slate-800/50 rounded-lg border border-slate-700">
      <div class="text-xs font-semibold text-slate-400 uppercase mb-2">Data Collection</div>
      <div class="space-y-1">
        <div class="px-2 py-1 bg-slate-900 rounded text-xs text-slate-300">List Projects</div>
        <div class="px-2 py-1 bg-slate-900 rounded text-xs text-slate-300">Get Issues/RFIs/Submittals</div>
      </div>
    </div>
    <div class="hidden sm:flex items-center text-slate-600">â†’</div>
    <div class="flex-1 p-3 bg-slate-800/50 rounded-lg border border-slate-700">
      <div class="text-xs font-semibold text-slate-400 uppercase mb-2">Aggregation</div>
      <div class="space-y-1">
        <div class="px-2 py-1 bg-slate-900 rounded text-xs text-slate-300">Combine Data</div>
        <div class="px-2 py-1 bg-slate-900 rounded text-xs text-slate-300">Add Project Context</div>
      </div>
    </div>
    <div class="hidden sm:flex items-center text-slate-600">â†’</div>
    <div class="flex-1 p-3 bg-slate-800/50 rounded-lg border border-slate-700">
      <div class="text-xs font-semibold text-slate-400 uppercase mb-2">Reports</div>
      <div class="space-y-1">
        <div class="px-2 py-1 bg-slate-900 rounded text-xs text-emerald-400 font-mono">report.md</div>
        <div class="px-2 py-1 bg-slate-900 rounded text-xs text-emerald-400 font-mono">all-issues.json</div>
        <div class="px-2 py-1 bg-slate-900 rounded text-xs text-emerald-400 font-mono">portfolio metrics</div>
      </div>
    </div>
  </div>
</div>

---

## MCP Integration

### Get Portfolio Overview

```
User: "Give me a summary across all our active construction projects"
```

<div class="not-prose my-6">
  <div class="bg-slate-900/50 rounded-lg border border-slate-700 p-4">
    <div class="flex justify-around mb-4 text-xs font-semibold text-slate-400">
      <span class="px-3 py-1 bg-slate-800 rounded">User</span>
      <span class="px-3 py-1 bg-blue-900/50 rounded text-blue-400">AI Assistant</span>
      <span class="px-3 py-1 bg-amber-900/50 rounded text-amber-400">RAPS MCP</span>
      <span class="px-3 py-1 bg-emerald-900/50 rounded text-emerald-400">ACC Cloud</span>
    </div>
    <div class="space-y-2 text-xs">
      <div class="flex items-center gap-2">
        <span class="w-16 text-slate-400">User</span>
        <span class="flex-1 h-px bg-slate-700"></span>
        <span class="px-2 py-1 bg-slate-800 rounded text-slate-300">Portfolio summary</span>
        <span class="flex-1 h-px bg-slate-700"></span>
        <span class="w-16 text-blue-400">AI</span>
      </div>
      <div class="flex items-center gap-2">
        <span class="w-16 text-blue-400">AI</span>
        <span class="flex-1 h-px bg-blue-700/50"></span>
        <span class="px-2 py-1 bg-blue-900/30 rounded text-blue-300 font-mono">aps_hub_list()</span>
        <span class="flex-1 h-px bg-blue-700/50"></span>
        <span class="w-16 text-amber-400">MCP</span>
      </div>
      <div class="flex items-center gap-2">
        <span class="w-16 text-blue-400">AI</span>
        <span class="flex-1 h-px bg-blue-700/50"></span>
        <span class="px-2 py-1 bg-blue-900/30 rounded text-blue-300 font-mono">aps_project_list(hub_id)</span>
        <span class="flex-1 h-px bg-blue-700/50"></span>
        <span class="w-16 text-amber-400">MCP</span>
      </div>
      <div class="flex items-center gap-2 pl-16">
        <span class="px-2 py-1 bg-purple-900/20 rounded text-purple-300 text-xs">Loop: For each project</span>
      </div>
      <div class="flex items-center gap-2 ml-4">
        <span class="w-12 text-blue-400">AI</span>
        <span class="flex-1 h-px bg-blue-700/50"></span>
        <span class="px-2 py-1 bg-blue-900/30 rounded text-blue-300 font-mono text-xs">aps_acc_issue_list, rfi_list, submittal_list</span>
        <span class="flex-1 h-px bg-amber-700/50"></span>
        <span class="w-12 text-emerald-400">ACC</span>
      </div>
      <div class="flex items-center gap-2 pl-16">
        <span class="px-2 py-1 bg-blue-900/20 rounded text-blue-300 text-xs">AI: Aggregate and analyze</span>
      </div>
      <div class="flex items-center gap-2">
        <span class="w-16 text-blue-400">AI</span>
        <span class="flex-1 h-px bg-slate-700"></span>
        <span class="px-2 py-1 bg-slate-800 rounded text-slate-300">Portfolio dashboard</span>
        <span class="flex-1 h-px bg-slate-700"></span>
        <span class="w-16 text-slate-400">User</span>
      </div>
    </div>
  </div>
</div>

**AI Response:**
> **Portfolio Summary - 5 Active Projects**
>
> | Project | Issues | RFIs | Submittals | Status |
> |---------|--------|------|------------|--------|
> | Main Street Tower | 45 (12 open) | 23 | 89 | On Track |
> | Riverside Complex | 32 (8 open) | 18 | 67 | Minor Delays |
> | Tech Campus Ph2 | 28 (5 open) | 12 | 45 | On Track |
> | Harbor View | 56 (18 open) | 31 | 102 | At Risk |
> | Metro Station | 19 (3 open) | 8 | 34 | On Track |
>
> **Portfolio Totals:**
> - Total Open Issues: 46
> - Total Open RFIs: 28
> - Pending Submittals: 45
>
> **Attention:** Harbor View has high open issue count.

### Compare Projects

```
User: "Compare issue resolution rates across projects"
```

**AI Response:**
> **Issue Resolution Rate Comparison:**
>
> | Project | Created | Resolved | Rate | Avg Days |
> |---------|---------|----------|------|----------|
> | Tech Campus Ph2 | 45 | 40 | 89% | 5.2 |
> | Metro Station | 28 | 24 | 86% | 6.1 |
> | Main Street Tower | 78 | 65 | 83% | 7.4 |
> | Riverside Complex | 52 | 42 | 81% | 8.2 |
> | Harbor View | 89 | 58 | 65% | 12.3 |
>
> **Insight:** Harbor View has significantly lower resolution rate and longer time to resolve. Consider increasing issue management resources.

---

## Dashboard Queries

### Critical Items Across Portfolio

```bash
cat all-issues.json | jq '
  [.[] | select(.priority == "critical" and .status == "open")] |
  group_by(.projectName) |
  map({project: .[0].projectName, criticalOpen: length, issues: [.[] | .title]})'
```

### Overdue Items Summary

```bash
TODAY=$(date +%Y-%m-%d)

echo "Overdue items by project:"
for type in issues rfis submittals; do
  echo "=== $type ==="
  cat "./portfolio/all-${type}.json" | jq --arg today "$TODAY" '
    [.[] | select(.dueDate != null and .dueDate < $today and .status == "open")] |
    group_by(.projectName) |
    map({project: .[0].projectName, overdue: length})'
done
```

### Weekly Trend

```bash
# Issues created per week across portfolio
cat all-issues.json | jq '
  group_by(.createdAt[:10] | strptime("%Y-%m-%d") | strftime("%Y-W%V")) |
  map({week: .[0].createdAt[:10] | strptime("%Y-%m-%d") | strftime("%Y-W%V"), created: length}) |
  sort_by(.week)'
```

---

## Related

- [Daily Log Automation](/cookbook/cookbook-acc-dailylog)
- [Issues & RFI Management](/cookbook/cookbook-acc-issues)
- [Cookbook: Construction](/cookbook/cookbook-construction)
